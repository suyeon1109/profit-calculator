<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <title>내일의창업 수익계산기</title>
        <link rel="icon" type="image/x-icon" href=" ">
        <link rel="stylesheet" href="style.css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="//code.jquery.com/jquery-3.3.3.min.js"></script>
    </head>

    <body style="width:100%; margin:0%">
        <header>
            <div class="topnav">
                <img class="home" src="https://tmr-founders.com/_next/image?url=%2Fimages%2Flogo%2Flogo.png&w=3840&q=75">
                <span class="space">
                    <a href="https://tmr-founders.com/story">스토리</a>
                    <a href="https://tmr-founders.com/newsfeed">뉴스피드</a>
                    <a href="https://tmr-founders.com/community">커뮤니티</a>
                    <a href="https://tmr-founders.com/virtual-store">창업하기</a>
                </span>
                <a id="login" href="https://accounts.kakao.com/login/?continue=https%3A%2F%2Fkauth.kakao.com%2Foauth%2Fauthorize%3Fresponse_type%3Dcode%26redirect_uri%3Dhttps%253A%252F%252Ftmr-founders.com%252Fapi%252Fauth%252Fcallback%252Fkakao%26state%3D%252Fvirtual-store%26through_account%3Dtrue%26client_id%3Da50c22fb3b8e6557ac9bc8262d90611f">로그인</a>
            </div>
        </header>

        <main class="maxWidth">
            <div class="block1">
                <!-- <div class="result">
                    <h4>예상 월 매출이 원 일때,</h4>
                    <h3>수익률은 %
                    <br>월 수익은 약 원입니다.</h3>
                </div> -->

                <ul>
                    <li>제시된 평균 예상 매출과 지출 비용은<br>통계자료에 근거한 내용입니다.</li>
                    <br>
                    <li>💵   예상하시는 월 매출이 <span id="monthlyExpected"></span>원 일때,</li>
                    <li>💵   수익률은 약 <span id="profitRate"></span>%이며,</li> 
                    <li>💵   월 발생하시는 수익은 <span id="finalProfit"></span>원입니다.</li>
                </ul>
            </div>

            <div class="block2">
                <h2>예상 월 매출</h2>
                <div class="box">
                    <p class="won"><span id="result1"></span>원</p>
                    
                    <!--won class 에 있는 것들은 다 백엔드로 form 입력할때 같이 바뀌게 만들어주세요-->
                    <form name="monthlyProfit" action="" method="post"> <!--post: 정보를 보낸다 / get: 가져온다-->
                        <input class="profit" id="sales" type="text" placeholder="예상 월 매출액 ">
                    </form>
                    
                </div>
                <p class="note">커피 업종 평균 월 매출액은 <span class="highlight">1,700만원</span>이예요</p>

                <h2>임대료</h2>
                    <div class="box">
                        <p class="won" id="won6"><span id="result6"></span>원</p>
                        <form name="monthlyProfit" action="" method="post"> <!--post: 정보를 보낸다 / get: 가져온다-->
                            <input class="profit" id="rentalFee" type="text" placeholder="임대료 ">
                        </form>
                    </div>
                    <p class="note">커피 업종 평균 임대료는 매출의 <span class="highlight">15%</span>이예요</p>
                
                <h2>원가</h2>
                    <div class="box">
                        <p class="won"><span id="result2"></span>원</p>
                        <form name="monthlyProfit" action="" method="post"> <!--post: 정보를 보낸다 / get: 가져온다-->
                            <input class="profit" id="fb" type="text" placeholder="식료품 ">
                        </form>
                    </div>
                    <div style="padding-bottom: 1%;"></div>

                    <div class="box">
                        <form>
                            <p class="won"><span id="result3"></span>원</p>
                            <input class="profit" id="supplies" type="text" placeholder="소모품 ">
                        </form>
                    </div>
                    <div style="padding-bottom: 1%;"></div>
                    
                    <div class="box">
                        <form>
                            <p class="won"><span id="result4"></span>원</p>
                            <input class="profit" id="primeCost" type="text" placeholder="기타 ">
                        </form>
                    </div>
                    <p class="note">커피 업종 평균 원가는 매출의 <span class="highlight">36%</span>예요</p>

                <h2>직원 급여</h2>
                    <!-- <span class="option">직접 입력 <span class="text">|</span> 시급으로 계산</span> -->

                    <div class="box">
                        <p class="won" id="won5"><span id="result5"></span>원</p>
                        <form name="monthlyProfit" action="" method="post"> <!--post: 정보를 보낸다 / get: 가져온다-->
                            <input class="profit" id="wage" type="text" placeholder="예상 직원 급여 ">
                        </form>
                    </div>
                    <p class="note">커피 업종 평균 급여는 매출의 <span class="highlight">20%</span>이예요</p>

                <h2>관리비</h2>
                    <div class="box">
                        <p class="won" id="won7"><span id="result7"></span>원</p>
                        <form name="monthlyProfit" action="" method="post"> <!--post: 정보를 보낸다 / get: 가져온다-->
                            <input class="profit" id="maintanenceFee" type="text" placeholder="관리비 ">
                        </form>
                    </div>
                    <p class="note">커피 업종 평균 관리비는 매출의 <span class="highlight">3%</span>이예요</p>

                <h2>판매 수수료</h2>
                    <div class="box">
                        <p class="won" id="won8"><span id="result8"></span>원</p>
                        <form name="monthlyProfit" action="" method="post"> <!--post: 정보를 보낸다 / get: 가져온다-->
                            <input class="profit" id="fee" type="text" placeholder="판매 수수료 ">
                        </form>
                    </div>
                    <p class="note">커피 업종 평균 판매 수수료는 매출의 <span class="highlight">3%</span>이예요</p>

                    <div style="margin-bottom:5%"></div>
                    <div>
                        <button class="setting" id="reset">초기화</button> <!--백엔드로 이 버튼 누르면 form input에 다 0 들어가게 해주세요-->
                        <button id="calculate">계산하기</button> <!--이 버튼이 눌렸을때 오른쪽 블록이 나타나게 해주세요-->
                    </div>

            </div>
        </main>
        

        <!-- <div class="block sticky">
            <div class="result">
                <h4>예상 월 매출이 1,700만원 일때,</h4>
                <h3>수익률은 23%
                <br>월 수익은 약 391만원입니다.</h3>
            </div>

            <ul>
                <li>  업종별 평균 예상 매출과 지출 비용은 내일의창업이 조사한 내용입니다.</li>
                <li>  감가상각, 세금(부가가치세·종합소득세), 점주 인건비를 고려하지 않습니다.</li>
                <li>  실제 창업 조건과 운영 환경에 따라 오차가 발생할 수 있으니 참고용으로 이용해 주세요.</li>
            </ul>
        </div> -->
        
        <script>
            sales.oninput = function() {
                result1.innerHTML = sales.value;
                addCommas(sales);
            }

            // sales.oninput=addCommas(sales);

            fb.oninput = function() {
                result2.innerHTML = fb.value;
                addCommas(result2);
            }

            supplies.oninput = function() {
                result3.innerHTML = supplies.value;
            }

            primeCost.oninput = function() {
                result4.innerHTML = primeCost.value;
            }

            wage.oninput = function() {
                result5.innerHTML = wage.value;
            }

            rentalFee.oninput = function() {
                result6.innerHTML = rentalFee.value;
            }

            maintanenceFee.oninput = function() {
                result7.innerHTML = maintanenceFee.value;
            }
            fee.oninput = function() {
                result8.innerHTML = fee.value;
            }

            // function addCommas(input) {
            //     let number = input.value.match(/^\d+(\.\d+)?$/);
            //     if (number) {
            //         number = number[0].replace(/(\d)(?=(\d{3})+(\.\d+)?$)/g, "$1,");
            //         input.value = number;
            //     }
            // }

            var btn = document.getElementById("calculate");
            var displayPR = document.getElementById("profitRate");
            var displayFP = document.getElementById("finalProfit");
            var displayME = document.getElementById("monthlyExpected");
            
          
            btn.onclick = function () {
                var sales = Number(document.getElementById("result1").innerText);
                var fb = Number(document.getElementById("result2").innerText);
                var supplies = Number(document.getElementById("result3").innerText);
                var primeCost = Number(document.getElementById("result4").innerText);
                var wage = Number(document.getElementById("result5").innerText);
                var rentalFee = Number(document.getElementById("result6").innerText);
                var maintanenceFee = Number(document.getElementById("result7").innerText);
                var fee = Number(document.getElementById("result8").innerText);
                var profitRate=0,finalProfit=0;

                //console.log(finalProfit,sales);
                

                finalProfit = sales - (fb+supplies+primeCost+wage+rentalFee+maintanenceFee+fee);
                //console.log(finalProfit);

                profitRate = (finalProfit/sales*100).toFixed(2);
                //console.log(profitRate);

                displayPR.innerHTML = profitRate;
                displayFP.innerHTML = finalProfit;
                displayME.innerHTML = sales;
            }

            /*
            1. 계산하기 버튼을 눌렀을때 계산된 숫자 띄우기
            1) 숫자 띄우기
                id="monthlyExpected"
                id="profitRate"
                id="profitRate"
                에 숫자 띄우기 tag=span
                <button id="calculate">계산하기</button> 가 클릭되었을때

                how to print numbers when button is clicked javascript

            2) 숫자 계산

            reset
            */

            var rst = document.getElementById("reset");
            
            rst.onclick = function () {
                window.location.reload();
            }


            /*
            콤마찍기
            */

            // $(function() {
            // var $input = $("#sales");
            // $input.on('keyup', function() {
            //     // 입력 값 알아내기
            //     var _this = this;
            //     numberFormat(_this)
            // })

            // });

            // // 콤마 찍기
            // function comma(str) {
            // str = String(str);
            // return str.replace(/(\d)(?=(?:\d{3})+(?!\d))/g, '$1,');
            // }

            // // 콤마 풀기
            // function uncomma(str) {
            // str = String(str);
            // return str.replace(/[^\d]+/g, '');
            // }

            // function numberFormat(obj) {
            // obj.value = comma(uncomma(obj.value));
            // }

            
            var $output = $("#output");
            var $input = $("#input");

            $("#confirm").click(function() {
            // 입력 값 알아내기
            var value = $input.val();
            // 천단위 콤마 추가한 결과값 리턴
            var result = addComma(value);
            $output.html(result);
            });
            // 천단위 마다 콤마(,) 추가하는 함수
            function addComma(value) {
            var num = isNumber(value);
            if (!num) return;

            // 문자열 길이가 3과 같거나 작은 경우 입력 값을 그대로 리턴
            if (num.length <= 3) {
                return num;
            }

            // 3단어씩 자를 반복 횟수 구하기
            var count = Math.floor((num.length - 1) / 3);

            // 결과 값을 저정할 변수
            var result = "";

            // 문자 뒤쪽에서 3개를 자르며 콤마(,) 추가
            for (var i = 0; i < count; i++) {

                // 마지막 문자(length)위치 - 3 을 하여 마지막인덱스부터 세번째 문자열 인덱스값 구하기
                var length = num.length;
                var strCut = num.substr(length - 3, length);
                // 반복문을 통해 value 값은 뒤에서 부터 세자리씩 값이 리턴됨.

                // 입력값 뒷쪽에서 3개의 문자열을 잘라낸 나머지 값으로 입력값 갱신
                num = num.slice(0, length - 3);

                // 콤마(,) + 신규로 자른 문자열 + 기존 결과 값
                result = "," + strCut + result;
            }

            // 마지막으로 루프를 돌고 남아 있을 입력값(value)을 최종 결과 앞에 추가
            result = num + result;

            // 최종값 리턴
            return result;
            }

            // 숫자 유무 판단
            function isNumber(checkValue) {
            checkValue = '' + checkValue;
            if (isNaN(checkValue) || checkValue == "") {
                alert('숫자만 입력해 주세요!!!');
                return;
            }
            return checkValue;
            }
        </script>

    </body>

</html>